<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CACHAS SPORT</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Enlace a archivo CSS externo -->
    <link rel="stylesheet" href="estilos.css" />

    <style>
        /* Estilos internos en CSS3 - Comentarios v치lidos */
        body {
            font-family: Arial, sans-serif;
            color: #333;
            background-color: #f8f9fa;
        }

        h1 {
            color: #0056b3;
            transition: color 0.5s ease;
        }

        h1:hover {
            color: #ff6600;
        }

        #gif-fijo {
            position: fixed;
            right: 10px;
            bottom: 10px;
            width: 150px;
            z-index: 1000;
        }

        .cuadro-estadio {
            border: 4px solid #007bff;
            border-radius: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 10px;
        }

        .cuadro-estadio:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 123, 255, 0.5);
        }

        .grandestitle {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-top: 50px;
            margin-bottom: 20px;
            color: #d9534f;
        }

        .grandestitle img {
            margin-top: 10px;
            width: 100%;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">CACHAS SPORT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#acerca">Acerca de la Instituci칩n</a></li>
                    <li class="nav-item"><a class="nav-link" href="#productos">Productos / Servicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="#novedades">Novedades</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <section id="acerca">
            <h1 class="texto-shorthand">Acerca de la Instituci칩n</h1>
            <h1 onclick="console.log('Hiciste clic en el t칤tulo')">CACHAS SPORT</h1>
            <p class="texto-tipo"><strong>CACHAS SPORT</strong> es una instituci칩n dedicada al an치lisis y promoci칩n del deporte. Nuestra <em>misi칩n</em> es ofrecer contenido de calidad a nuestros seguidores.</p>
            
            <!-- Uso de <ins> y <del> -->
            
            
            <blockquote>"El deporte es el reflejo de la sociedad y su evoluci칩n." - <cite>Axel Garc칤a 2007-2025</cite></blockquote>
            <dfn>Deporte</dfn>: Actividad f칤sica para mejorar habilidades o mantener la salud.

            <pre><code>Hola Bienvenidos a esta pagina web donde hablaremos acerca de los deportes mas emocionantes y mas entretenidos que hay en la historia de los Deportes"</code></pre>

            <!-- Lista ordenada (ol) -->
            <h2>Ranking de Deportes Populares</h2>
            <ol>
                <li>F칰tbol</li>
                <li>Baloncesto</li>
                <li>Tenis</li>
            </ol>

            <!-- Lista de definici칩n -->
            <dl>
                <dt>Deporte</dt>
                <dd>Actividad f칤sica para la salud y entretenimiento.</dd>
                <dt>Atleta</dt>
                <dd>Persona que practica deporte con dedicaci칩n.</dd>
            </dl>

            <!-- Acronym (obsoleta, pero agregada) -->
            <p>La sigla <acronym title="Organizaci칩n de las Naciones Unidas">ONU</acronym> es ampliamente conocida.</p>

            <!-- Aqu칤 se inserta el p치rrafo con fecha actual -->
            <script>
                // Crear un nuevo p치rrafo
                const p = document.createElement('p');
                const fecha = new Date();
                // Formatear fecha en espa침ol
                const opciones = { year: 'numeric', month: 'long', day: 'numeric' };
                p.textContent = `Fecha actual: ${fecha.toLocaleDateString('es-ES', opciones)}`;
                // Insertar el p치rrafo al final de la secci칩n 'acerca'
                document.getElementById('acerca').appendChild(p);
            </script>

        </section>

        <section id="productos">
            <h1>Productos</h1>
            <ul>
                <li><a href="revistas.html">Revistas Deportivas</a></li>
                <li><a href="accesorios.html">Accesorios y ropa deportiva</a></li>
            </ul>
        </section>

        <section id="servicios">
            <h1>Servicios</h1>
            <ul>
                <li><a href="analisisdeportivo.html">An치lisis deportivos</a></li>
            </ul>
        </section>

        <section id="novedades">
            <h1>Novedades</h1>
            <p>칔ltimas noticias y actualizaciones de <abbr title="CACHAS SPORT">CS</abbr>. <br />&nbsp; 춰No te lo pierdas!</p>
        </section>

        <section id="historia">
            <h1 style="text-shadow: 2px 2px 5px gray;">Historia del F칰tbol</h1>
            <p>El f칰tbol, tambi칠n conocido como soccer en algunos pa칤ses, es uno de los deportes m치s populares y practicados en el mundo. Se origin칩 en Inglaterra en el siglo XIX y r치pidamente se difundi칩 a nivel mundial. En 1904, la FIFA fue fundada para organizar competiciones internacionales y unificar las reglas del deporte. Desde entonces, el f칰tbol ha crecido en importancia, convirti칠ndose en una parte integral de la cultura global, con eventos como la Copa del Mundo atrayendo miles de millones de espectadores.</p>

            <!-- Tabla con headers, scope, colspan, rowspan -->
            <table border="1" summary="Tabla de eventos importantes en la historia del f칰tbol" style="width: 100%; margin-top: 20px;">
                <caption>Eventos Hist칩ricos del F칰tbol</caption>
                <thead>
                    <tr>
                        <th scope="col">A침o</th>
                        <th scope="col">Evento</th>
                        <th scope="col" colspan="2">Descripci칩n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td headers="ano">1863</td>
                        <td headers="evento">Fundaci칩n de la FA</td>
                        <td headers="desc1" colspan="2">Se establecen las reglas del f칰tbol moderno.</td>
                    </tr>
                    <tr>
                        <td>1904</td>
                        <td>Fundaci칩n FIFA</td>
                        <td colspan="2">Organizaci칩n internacional del f칰tbol.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="deportes">
            <h1>Deportes</h1>
            <ul>
                <li><a href="#futbol">F칰tbol</a></li>
                <li><a href="basquetbol.html">游 Ver estrellas del Basquetbol</a></li>
                <li><a href="tenis.html">游 Ver estrellas del Tenis</a></li>
            </ul>
        </section>

        <section id="mapa-estadios">
            <h1>Informaci칩n de equipos de f칰tbol</h1>
            <p>Haz clic en la zona de inter칠s:</p>
            <!-- Mapa de imagen -->
            <img src="mapas.html" alt="Mapa de estadios de f칰tbol" usemap="#mapaestadios" class="img-fluid" />
            <map name="mapaestadios">
                <area shape="rect" coords="0,0,100,100" href="bernabeu.html" alt="Estadio Santiago Bernab칠u" />
                <area shape="rect" coords="101,0,200,100" href="akron.html" alt="Estadio Akron" />
                <area shape="rect" coords="201,0,300,100" href="azteca.html" alt="Estadio Azteca" />
            </map>
        </section>

   <section id="formulario">
        <h1>Formulario de contacto</h1>
        <form id="form-usuario">
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="nombre" required>
            </div>
            <div class="mb-3">
                <label for="correo" class="form-label">Correo:</label>
                <input type="email" class="form-control" id="correo" required>
            </div>
            <div class="mb-3">
                <label for="cumplea침os" class="form-label">Fecha de Cumplea침os:</label>
                <input type="date" class="form-control" id="cumplea침os" required>
            </div>
            <div class="mb-3">
                <label for="genero" class="form-label">G칠nero:</label>
                <select class="form-select" id="genero" required>
                    <option value="">Seleccionar</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="otro">Otro</option>
                </select>
            </div>
            <button class="btn btn-primary" type="submit">Registrar usuario</button>
        </form>
    </section>

   <section id="lista-usuarios" class="mt-5">
        <h2>Usuarios registrados</h2>
        <table class="table table-striped" id="tabla-usuarios">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Cumplea침os</th>
                    <th>G칠nero</th>
                    <th>Hora de Registro</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Usuarios se mostrar치n aqu칤 -->
            </tbody>
        </table>
    </section>
<!--Modal para editar usuario -->
<div class="modal fade" id="modalEditarUsuario" tabindex="-1" aria-labelledby="modalEditarUsuarioLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalEditarUsuarioLabel">Editar Usuario</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="form-editar-usuario">
            <input type="hidden" id="id-usuario">
            <div class="mb-3">
              <label for="nombre-editar" class="form-label">Nombre:</label>
              <input type="text" class="form-control" id="nombre-editar">
            </div>
            <div class="mb-3">
              <label for="correo-editar" class="form-label">Correo:</label>
              <input type="email" class="form-control" id="correo-editar">
            </div>
            <div class="mb-3">
              <label for="cumplea침os-editar" class="form-label">Fecha de Cumplea침os:</label>
              <input type="date" class="form-control" id="cumplea침os-editar">
            </div>
            <div class="mb-3">
              <label for="genero-editar" class="form-label">G칠nero:</label>
              <select class="form-select" id="genero-editar">
                <option value="masculino">Masculino</option>
                <option value="femenino">Femenino</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
          </form>
        </div>
      </div>
    </div>
  </div>


    </div>

    <footer class="text-center mt-5 mb-3">
        <p>&copy; 2025 CACHAS SPORT. Todos los derechos reservados.</p>
    </footer>

    <!-- Im치gen GIF fija -->
    <img id="gif-fijo" src="giphy.gif" alt="GIF divertido" />

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Crear o abrir la base de datos IndexedDB
        let db;
        const request = indexedDB.open("UsuariosDB", 1);

        request.onerror = (event) => {
            console.error("Error al abrir IndexedDB:", event.target.errorCode);
        };

        request.onsuccess = (event) => {
            db = event.target.result;
            mostrarUsuarios(); // Mostrar usuarios al abrir la base de datos
            console.log("Base de datos abierta con 칠xito");
        };

        request.onupgradeneeded = (event) => {
            db = event.target.result;
            if (!db.objectStoreNames.contains("usuarios")) {
                const store = db.createObjectStore("usuarios", { keyPath: "id", autoIncrement: true });
                store.createIndex("nombre", "nombre", { unique: false });
                store.createIndex("correo", "correo", { unique: true });
            }
        };

       // Funci칩n para registrar usuarios (modificada)
        document.getElementById("form-usuario").addEventListener("submit", function(e) {
            e.preventDefault();
            const nombre = document.getElementById("nombre").value;
            const correo = document.getElementById("correo").value;
            const cumplea침os = document.getElementById("cumplea침os").value;
            const genero = document.getElementById("genero").value;
            const horaRegistro = new Date().toLocaleTimeString(); // Obtener hora actual
            //Validacion de la fecha de Cumplea침os
			   const fechaMaxima = new Date();
    fechaMaxima.setFullYear(fechaMaxima.getFullYear()); //Establece el a침o actual
    const fechaCumplea침os = new Date(cumplea침os);
	      if (fechaCumplea침os > fechaMaxima) {
        alert("La fecha de cumplea침os no puede ser posterior al a침o actual.");
        return; //Detenemos la ejecuci칩n si la fecha es inv치lida
    }
            const transaction = db.transaction(["usuarios"], "readwrite");
            const store = transaction.objectStore("usuarios");
            const nuevoUsuario = { nombre, correo, cumplea침os, genero, horaRegistro };
            const addRequest = store.add(nuevoUsuario);

            addRequest.onsuccess = () => {
                alert("Usuario registrado correctamente en IndexedDB.");
                document.getElementById("form-usuario").reset();
                mostrarUsuarios();
            };

            addRequest.onerror = () => {
                alert("Error al registrar usuario. 쯏a existe este correo?");
            };
        });



      // Funci칩n para mostrar usuarios en la tabla (modificada)
        function mostrarUsuarios() {
            const tbody = document.querySelector("#tabla-usuarios tbody");
            tbody.innerHTML = "";

            const transaction = db.transaction("usuarios", "readonly");
            const store = transaction.objectStore("usuarios");

            store.openCursor().onsuccess = function(event) {
                const cursor = event.target.result;
                if (cursor) {
                    const usuario = cursor.value;
                    const row = tbody.insertRow();
                    const idCell = row.insertCell();
                    const nombreCell = row.insertCell();
                    const correoCell = row.insertCell();
                    const cumplea침osCell = row.insertCell();
                    const generoCell = row.insertCell();
                    const horaRegistroCell = row.insertCell();
                    const accionesCell = row.insertCell();

                    idCell.textContent = usuario.id;
                    nombreCell.textContent = usuario.nombre;
                    correoCell.textContent = usuario.correo;
                    cumplea침osCell.textContent = usuario.cumplea침os;
                    generoCell.textContent = usuario.genero;
                    horaRegistroCell.textContent = usuario.horaRegistro;
                    accionesCell.innerHTML = `
                        <button class="btn btn-warning btn-sm btn-editar" data-id="${usuario.id}">Editar</button>
                        <button class="btn btn-danger btn-sm btn-eliminar" data-id="${usuario.id}">Eliminar</button>
                    `;
                    cursor.continue();
                }
            };
        }

document.querySelector("#tabla-usuarios tbody").addEventListener("click", function(e) {
  if (e.target.classList.contains("btn-editar")) {
    const id = Number(e.target.dataset.id);

    const transaction = db.transaction("usuarios", "readonly");
    const store = transaction.objectStore("usuarios");
    const getRequest = store.get(id);

    getRequest.onsuccess = () => {
      const usuario = getRequest.result;
      if (usuario) {
        const nuevoNombre = prompt("Editar nombre:", usuario.nombre);
        const nuevoCorreo = prompt("Editar correo:", usuario.correo);

        // Aqu칤 est치 la correcci칩n:  Mantenemos todos los campos
        if (nuevoNombre || nuevoCorreo) { //Solo si se modifica algo
          const usuarioActualizado = {
            id: usuario.id,
            nombre: nuevoNombre || usuario.nombre, //Si no se modifica, mantiene el valor original
            correo: nuevoCorreo || usuario.correo, //Si no se modifica, mantiene el valor original
            cumplea침os: usuario.cumplea침os,  //Se mantienen los datos originales
            genero: usuario.genero,       //Se mantienen los datos originales
            horaRegistro: usuario.horaRegistro //Se mantienen los datos originales
          };

          const transactionEdit = db.transaction(["usuarios"], "readwrite");
          const storeEdit = transactionEdit.objectStore("usuarios");
          const putRequest = storeEdit.put(usuarioActualizado);

          putRequest.onsuccess = () => {
            alert("Usuario actualizado");
            mostrarUsuarios();
          };

          putRequest.onerror = () => {
            alert("Error al actualizar usuario (quiz치s correo duplicado)");
          };
        }
      }
    };
  } else if (e.target.classList.contains("btn-eliminar")) {
    const id = Number(e.target.dataset.id);
    if(confirm("쯉eguro que quieres eliminar este usuario?")) {
      const transaction = db.transaction("usuarios", "readwrite");
      const store = transaction.objectStore("usuarios");
      const deleteRequest = store.delete(id);

      deleteRequest.onsuccess = () => {
        alert("Usuario eliminado");
        mostrarUsuarios(); // Actualizar la tabla despu칠s de eliminar
      };

      deleteRequest.onerror = () => {
        alert("Error al eliminar usuario");
      };
    }
  }
});


request.onsuccess = (event) => {
  db = event.target.result;
  mostrarUsuarios();
  console.log("Base de datos abierta con 칠xito");
};
    </script>




</html>

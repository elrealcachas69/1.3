<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CACHAS SPORT</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Enlace a archivo CSS externo -->
    <link rel="stylesheet" href="estilos.css" />

    <style>
        /* Estilos internos en CSS3 - Comentarios válidos */
        body {
            font-family: Arial, sans-serif;
            color: #333;
            background-color: #f8f9fa;
        }

        h1 {
            color: #0056b3;
            transition: color 0.5s ease;
        }

        h1:hover {
            color: #ff6600;
        }

        #gif-fijo {
            position: fixed;
            right: 10px;
            bottom: 10px;
            width: 150px;
            z-index: 1000;
        }

        .cuadro-estadio {
            border: 4px solid #007bff;
            border-radius: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 10px;
        }

        .cuadro-estadio:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 123, 255, 0.5);
        }

        .grandestitle {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-top: 50px;
            margin-bottom: 20px;
            color: #d9534f;
        }

        .grandestitle img {
            margin-top: 10px;
            width: 100%;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">CACHAS SPORT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#acerca">Acerca de la Institución</a></li>
                    <li class="nav-item"><a class="nav-link" href="#productos">Productos / Servicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="#novedades">Novedades</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <section id="acerca">
            <h1 class="texto-shorthand">Acerca de la Institución</h1>
            <h1 onclick="console.log('Hiciste clic en el título')">CACHAS SPORT</h1>
            <p class="texto-tipo"><strong>CACHAS SPORT</strong> es una institución dedicada al análisis y promoción del deporte. Nuestra <em>misión</em> es ofrecer contenido de calidad a nuestros seguidores.</p>
            
            <!-- Uso de <ins> y <del> -->
            
            
            <blockquote>"El deporte es el reflejo de la sociedad y su evolución." - <cite>Axel García 2007-2025</cite></blockquote>
            <dfn>Deporte</dfn>: Actividad física para mejorar habilidades o mantener la salud.

            <pre><code>Hola Bienvenidos a esta pagina web donde hablaremos acerca de los deportes mas emocionantes y mas entretenidos que hay en la historia de los Deportes"</code></pre>

            <!-- Lista ordenada (ol) -->
            <h2>Ranking de Deportes Populares</h2>
            <ol>
                <li>Fútbol</li>
                <li>Baloncesto</li>
                <li>Tenis</li>
            </ol>

            <!-- Lista de definición -->
            <dl>
                <dt>Deporte</dt>
                <dd>Actividad física para la salud y entretenimiento.</dd>
                <dt>Atleta</dt>
                <dd>Persona que practica deporte con dedicación.</dd>
            </dl>

            <!-- Acronym (obsoleta, pero agregada) -->
            <p>La sigla <acronym title="Organización de las Naciones Unidas">ONU</acronym> es ampliamente conocida.</p>

            <!-- Aquí se inserta el párrafo con fecha actual -->
            <script>
                // Crear un nuevo párrafo
                const p = document.createElement('p');
                const fecha = new Date();
                // Formatear fecha en español
                const opciones = { year: 'numeric', month: 'long', day: 'numeric' };
                p.textContent = `Fecha actual: ${fecha.toLocaleDateString('es-ES', opciones)}`;
                // Insertar el párrafo al final de la sección 'acerca'
                document.getElementById('acerca').appendChild(p);
            </script>

        </section>

        <section id="productos">
            <h1>Productos</h1>
            <ul>
                <li><a href="revistas.html">Revistas Deportivas</a></li>
                <li><a href="accesorios.html">Accesorios y ropa deportiva</a></li>
            </ul>
        </section>

        <section id="servicios">
            <h1>Servicios</h1>
            <ul>
                <li><a href="analisisdeportivo.html">Análisis deportivos</a></li>
            </ul>
        </section>

        <section id="novedades">
            <h1>Novedades</h1>
            <p>Últimas noticias y actualizaciones de <abbr title="CACHAS SPORT">CS</abbr>. <br />&nbsp; ¡No te lo pierdas!</p>
        </section>

        <section id="historia">
            <h1 style="text-shadow: 2px 2px 5px gray;">Historia del Fútbol</h1>
            <p>El fútbol, también conocido como soccer en algunos países, es uno de los deportes más populares y practicados en el mundo. Se originó en Inglaterra en el siglo XIX y rápidamente se difundió a nivel mundial. En 1904, la FIFA fue fundada para organizar competiciones internacionales y unificar las reglas del deporte. Desde entonces, el fútbol ha crecido en importancia, convirtiéndose en una parte integral de la cultura global, con eventos como la Copa del Mundo atrayendo miles de millones de espectadores.</p>

            <!-- Tabla con headers, scope, colspan, rowspan -->
            <table border="1" summary="Tabla de eventos importantes en la historia del fútbol" style="width: 100%; margin-top: 20px;">
                <caption>Eventos Históricos del Fútbol</caption>
                <thead>
                    <tr>
                        <th scope="col">Año</th>
                        <th scope="col">Evento</th>
                        <th scope="col" colspan="2">Descripción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td headers="ano">1863</td>
                        <td headers="evento">Fundación de la FA</td>
                        <td headers="desc1" colspan="2">Se establecen las reglas del fútbol moderno.</td>
                    </tr>
                    <tr>
                        <td>1904</td>
                        <td>Fundación FIFA</td>
                        <td colspan="2">Organización internacional del fútbol.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="deportes">
            <h1>Deportes</h1>
            <ul>
                <li><a href="#futbol">Fútbol</a></li>
                <li><a href="basquetbol.html">🏀 Ver estrellas del Basquetbol</a></li>
                <li><a href="tenis.html">🎾 Ver estrellas del Tenis</a></li>
            </ul>
        </section>

        <section id="mapa-estadios">
            <h1>Información de equipos de fútbol</h1>
            <p>Haz clic en la zona de interés:</p>
            <!-- Mapa de imagen -->
            <img src="mapas.html" alt="Mapa de estadios de fútbol" usemap="#mapaestadios" class="img-fluid" />
            <map name="mapaestadios">
                <area shape="rect" coords="0,0,100,100" href="bernabeu.html" alt="Estadio Santiago Bernabéu" />
                <area shape="rect" coords="101,0,200,100" href="akron.html" alt="Estadio Akron" />
                <area shape="rect" coords="201,0,300,100" href="azteca.html" alt="Estadio Azteca" />
            </map>
        </section>

   <section id="formulario">
        <h1>Formulario de contacto</h1>
        <form id="form-usuario">
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="nombre" required>
            </div>
            <div class="mb-3">
                <label for="correo" class="form-label">Correo:</label>
                <input type="email" class="form-control" id="correo" required>
            </div>
            <div class="mb-3">
                <label for="cumpleaños" class="form-label">Fecha de Cumpleaños:</label>
                <input type="date" class="form-control" id="cumpleaños" required>
            </div>
            <div class="mb-3">
                <label for="genero" class="form-label">Género:</label>
                <select class="form-select" id="genero" required>
                    <option value="">Seleccionar</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="otro">Otro</option>
                </select>
            </div>
            <button class="btn btn-primary" type="submit">Registrar usuario</button>
        </form>
    </section>

   <section id="lista-usuarios" class="mt-5">
        <h2>Usuarios registrados</h2>
        <table class="table table-striped" id="tabla-usuarios">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Cumpleaños</th>
                    <th>Género</th>
                    <th>Hora de Registro</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Usuarios se mostrarán aquí -->
            </tbody>
        </table>
    </section>
<!--Modal para editar usuario -->
<div class="modal fade" id="modalEditarUsuario" tabindex="-1" aria-labelledby="modalEditarUsuarioLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalEditarUsuarioLabel">Editar Usuario</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="form-editar-usuario">
            <input type="hidden" id="id-usuario">
            <div class="mb-3">
              <label for="nombre-editar" class="form-label">Nombre:</label>
              <input type="text" class="form-control" id="nombre-editar">
            </div>
            <div class="mb-3">
              <label for="correo-editar" class="form-label">Correo:</label>
              <input type="email" class="form-control" id="correo-editar">
            </div>
            <div class="mb-3">
              <label for="cumpleaños-editar" class="form-label">Fecha de Cumpleaños:</label>
              <input type="date" class="form-control" id="cumpleaños-editar">
            </div>
            <div class="mb-3">
              <label for="genero-editar" class="form-label">Género:</label>
              <select class="form-select" id="genero-editar">
                <option value="masculino">Masculino</option>
                <option value="femenino">Femenino</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
          </form>
        </div>
      </div>
    </div>
  </div>


    </div>

    <footer class="text-center mt-5 mb-3">
        <p>&copy; 2025 CACHAS SPORT. Todos los derechos reservados.</p>
    </footer>

    <!-- Imágen GIF fija -->
    <img id="gif-fijo" src="giphy.gif" alt="GIF divertido" />

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Crear o abrir la base de datos IndexedDB
        let db;
        const request = indexedDB.open("UsuariosDB", 1);

        request.onerror = (event) => {
            console.error("Error al abrir IndexedDB:", event.target.errorCode);
        };

        request.onsuccess = (event) => {
            db = event.target.result;
            mostrarUsuarios(); // Mostrar usuarios al abrir la base de datos
            console.log("Base de datos abierta con éxito");
        };

        request.onupgradeneeded = (event) => {
            db = event.target.result;
            if (!db.objectStoreNames.contains("usuarios")) {
                const store = db.createObjectStore("usuarios", { keyPath: "id", autoIncrement: true });
                store.createIndex("nombre", "nombre", { unique: false });
                store.createIndex("correo", "correo", { unique: true });
            }
        };

       // Función para registrar usuarios (modificada)
        document.getElementById("form-usuario").addEventListener("submit", function(e) {
            e.preventDefault();
            const nombre = document.getElementById("nombre").value;
            const correo = document.getElementById("correo").value;
            const cumpleaños = document.getElementById("cumpleaños").value;
            const genero = document.getElementById("genero").value;
            const horaRegistro = new Date().toLocaleTimeString(); // Obtener hora actual
            //Validacion de la fecha de Cumpleaños
			   const fechaMaxima = new Date();
    fechaMaxima.setFullYear(fechaMaxima.getFullYear()); //Establece el año actual
    const fechaCumpleaños = new Date(cumpleaños);
	      if (fechaCumpleaños > fechaMaxima) {
        alert("La fecha de cumpleaños no puede ser posterior al año actual.");
        return; //Detenemos la ejecución si la fecha es inválida
    }
            const transaction = db.transaction(["usuarios"], "readwrite");
            const store = transaction.objectStore("usuarios");
            const nuevoUsuario = { nombre, correo, cumpleaños, genero, horaRegistro };
            const addRequest = store.add(nuevoUsuario);

            addRequest.onsuccess = () => {
                alert("Usuario registrado correctamente en IndexedDB.");
                document.getElementById("form-usuario").reset();
                mostrarUsuarios();
            };

            addRequest.onerror = () => {
                alert("Error al registrar usuario. ¿Ya existe este correo?");
            };
        });



      // Función para mostrar usuarios en la tabla (modificada)
        function mostrarUsuarios() {
            const tbody = document.querySelector("#tabla-usuarios tbody");
            tbody.innerHTML = "";

            const transaction = db.transaction("usuarios", "readonly");
            const store = transaction.objectStore("usuarios");

            store.openCursor().onsuccess = function(event) {
                const cursor = event.target.result;
                if (cursor) {
                    const usuario = cursor.value;
                    const row = tbody.insertRow();
                    const idCell = row.insertCell();
                    const nombreCell = row.insertCell();
                    const correoCell = row.insertCell();
                    const cumpleañosCell = row.insertCell();
                    const generoCell = row.insertCell();
                    const horaRegistroCell = row.insertCell();
                    const accionesCell = row.insertCell();

                    idCell.textContent = usuario.id;
                    nombreCell.textContent = usuario.nombre;
                    correoCell.textContent = usuario.correo;
                    cumpleañosCell.textContent = usuario.cumpleaños;
                    generoCell.textContent = usuario.genero;
                    horaRegistroCell.textContent = usuario.horaRegistro;
                    accionesCell.innerHTML = `
                        <button class="btn btn-warning btn-sm btn-editar" data-id="${usuario.id}">Editar</button>
                        <button class="btn btn-danger btn-sm btn-eliminar" data-id="${usuario.id}">Eliminar</button>
                    `;
                    cursor.continue();
                }
            };
        }

document.querySelector("#tabla-usuarios tbody").addEventListener("click", function(e) {
  if (e.target.classList.contains("btn-editar")) {
    const id = Number(e.target.dataset.id);

    const transaction = db.transaction("usuarios", "readonly");
    const store = transaction.objectStore("usuarios");
    const getRequest = store.get(id);

    getRequest.onsuccess = () => {
      const usuario = getRequest.result;
      if (usuario) {
        const nuevoNombre = prompt("Editar nombre:", usuario.nombre);
        const nuevoCorreo = prompt("Editar correo:", usuario.correo);

        // Aquí está la corrección:  Mantenemos todos los campos
        if (nuevoNombre || nuevoCorreo) { //Solo si se modifica algo
          const usuarioActualizado = {
            id: usuario.id,
            nombre: nuevoNombre || usuario.nombre, //Si no se modifica, mantiene el valor original
            correo: nuevoCorreo || usuario.correo, //Si no se modifica, mantiene el valor original
            cumpleaños: usuario.cumpleaños,  //Se mantienen los datos originales
            genero: usuario.genero,       //Se mantienen los datos originales
            horaRegistro: usuario.horaRegistro //Se mantienen los datos originales
          };

          const transactionEdit = db.transaction(["usuarios"], "readwrite");
          const storeEdit = transactionEdit.objectStore("usuarios");
          const putRequest = storeEdit.put(usuarioActualizado);

          putRequest.onsuccess = () => {
            alert("Usuario actualizado");
            mostrarUsuarios();
          };

          putRequest.onerror = () => {
            alert("Error al actualizar usuario (quizás correo duplicado)");
          };
        }
      }
    };
  } else if (e.target.classList.contains("btn-eliminar")) {
    const id = Number(e.target.dataset.id);
    if(confirm("¿Seguro que quieres eliminar este usuario?")) {
      const transaction = db.transaction("usuarios", "readwrite");
      const store = transaction.objectStore("usuarios");
      const deleteRequest = store.delete(id);

      deleteRequest.onsuccess = () => {
        alert("Usuario eliminado");
        mostrarUsuarios(); // Actualizar la tabla después de eliminar
      };

      deleteRequest.onerror = () => {
        alert("Error al eliminar usuario");
      };
    }
  }
});


request.onsuccess = (event) => {
  db = event.target.result;
  mostrarUsuarios();
  console.log("Base de datos abierta con éxito");
};
    </script>




</html>
